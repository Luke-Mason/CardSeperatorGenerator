# Default values for card-separator
# This is a YAML-formatted file.

# Global settings
global:
  domain: localhost

# Image settings
image:
  pullPolicy: Always
  backend:
    repository: card-separator/backend
    tag: latest
  frontend:
    repository: card-separator/frontend
    tag: latest

# Backend configuration
backend:
  replicaCount: 3

  env:
    DATABASE_PATH: /data/cards.db
    MINIO_ENDPOINT: card-separator-minio:9000
    MINIO_ACCESS_KEY: minioadmin
    MINIO_SECRET_KEY: minioadmin
    MINIO_BUCKET: card-images
    MINIO_USE_SSL: false
    MINIO_REGION: us-east-1
    AUTO_SYNC_ON_STARTUP: true
    SET_SYNC_INTERVAL_HOURS: 24
    CACHE_MAX_AGE_HOURS: 168

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

  persistence:
    enabled: true
    size: 10Gi
    storageClass: standard

  service:
    type: ClusterIP
    port: 8080

# Frontend configuration
frontend:
  replicaCount: 2

  env:
    VITE_API_URL: http://localhost:8080

  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

  service:
    type: ClusterIP
    port: 5173

# MinIO configuration
minio:
  enabled: true
  mode: standalone  # or 'distributed' for production
  replicas: 1

  persistence:
    enabled: true
    size: 50Gi
    storageClass: standard

  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi

  service:
    type: ClusterIP
    port: 9000
    consolePort: 9001

  auth:
    rootUser: minioadmin
    rootPassword: minioadmin

# Sync worker (CronJob)
syncWorker:
  enabled: true
  schedule: "0 */6 * * *"  # Every 6 hours

  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Ingress configuration
ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: cardseparator.local
      paths:
        - path: /
          pathType: Prefix
          backend: frontend
        - path: /api
          pathType: Prefix
          backend: backend
  tls:
    - secretName: card-separator-tls
      hosts:
        - cardseparator.local

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# RBAC
rbac:
  create: true
